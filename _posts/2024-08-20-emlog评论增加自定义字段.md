---
layout: mypost
title: emlog评论增加自定义字段
author: minc_nice_100
category: "时光机"
---

emlog的评论只有uid,date,poster,gid,comment,mail,url,hide,ip,agent,pid几个字段,不方便拓展.

1. 进入您的数据库,找到**emlog数据库**的**{自定义前缀}_comment表**,增加自己想要定义的字段为sql字段(以addr为例子)  
![emlog评论增加自定义字段](https://web.archive.org/web/20240829094917im_/https://ited.top/content/uploadfile/202408/thum-41311724119548.png)

2. 打开`/include/model/comment_model.php`,查找**`addComment`**函数,这个是emlog增加评论函数  
![emlog评论增加自定义字段](https://web.archive.org/web/20240829094917im_/https://ited.top/content/uploadfile/202408/thum-1e291724119809.png)

3. 为这个函数引入额外的数据,关于函数如何加参数,请自行重修php  
![emlog评论增加自定义字段](https://web.archive.org/web/20240829094917im_/https://ited.top/content/uploadfile/202408/thum-e4cf1724120027.png)

4. 查找**`$sql`**,在数据库语句里加入自己的自定义字段  
![emlog评论增加自定义字段](https://web.archive.org/web/20240829094917im_/https://ited.top/content/uploadfile/202408/ed451724134832.png)

5. 要调用字段时,一般使用**`${评论信息列表}["{字段名}"]`**,例子如下

```php
$mail = $value['mail'] ? " <br />Email: {$value['mail']}" : '';
$addr = $value['addr'] ? " <br />Addr.: {$value['addr']}" : '';
```

![emlog评论增加自定义字段](https://web.archive.org/web/20240829094917im_/https://ited.top/content/uploadfile/202408/13b01724135055.png)